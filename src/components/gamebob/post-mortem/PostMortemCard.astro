---
import './PostMortemCard.css';
import { Icon } from "astro-icon/components";
import type { PostMortemEntry } from "../../../data/gamebob/post-mortem/entries";

interface props {
    entry: postmortementry;
}

const { entry } = Astro.props;
const imagePath = entry.image ? `/images/gamebob/post-mortem/${entry.image}` : null;

---

<a
    href={`/gamebob/post-mortem/${entry.id}/`}
    class="pm-card"
>
    <div class="pm-card-top-line"></div>

    <div class="pm-image-wrapper">
        {
            imagePath ? (
                <img
                    src={imagePath}
                    alt={entry.title}
                    class="pm-image"
                />
            ) : (
                <div class="pm-image-placeholder">
                    <Icon name="mdi:alert-decagram" class="pm-placeholder-icon" />
                </div>
            )
        }

        <div class="pm-id-badge">
            ID: {entry.id}

        </div>

        <div class="pm-date-badge">
            {entry.date}

        </div>
    </div>

    <div class="pm-card-content">
        <h2 class="pm-card-title">
            {entry.title}
        </h2>

        <div class="pm-card-body">
            <div class="pm-row">
                <Icon name="mdi:close-circle-outline" class="pm-icon-sm" style="color: #ef4444" />
                <p class="pm-error-text">
                    "{entry.error}"
                </p>
            </div>
            <div class="pm-row">
                <Icon
                    name="mdi:check-circle-outline"
                    class="pm-icon-sm"
                    style="color: #10b981"
                />
                <p class="pm-lesson-text">
                    {entry.lesson}

                </p>
            </div>
        </div>

        <div class="pm-card-footer">
            {
                entry.tags &&
                    entry.tags
                        .slice(0, 3)
                        .map((tag) => (
                            <span class="pm-tag">
                                #{tag}
                            </span>
                        ))
            }
        </div>
    </div>

    <div class="pm-scan-overlay"></div>
</a>
