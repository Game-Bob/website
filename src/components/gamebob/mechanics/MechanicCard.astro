---
import './MechanicCard.css';
import { Icon } from "astro-icon/components";
import type { MechanicItem } from "../../../data/gamebob/mechanics";
import { useLanguagePath, useTranslations } from "../../../i18n/utils";

interface Props {
    mechanic: MechanicItem;
}

const { lang } = Astro.params;
const l = useLanguagePath(lang as any);
const t = useTranslations(lang as any);
const { mechanic } = Astro.props;

const title = t(`mechanics.${mechanic.id}.title`);
const description = t(`mechanics.${mechanic.id}.description`);
const tags = t(`mechanics.${mechanic.id}.tags`) as unknown as string[];

---

<a
    href={l(mechanic.url)}
    class="mechanic-card"
    data-tags={tags.join(",")}
    data-platforms={mechanic.platforms}
>
    <div class="card-inner">
        <div class="card-header">
            <div class="icon-box">
                <Icon name={mechanic.icon} class="card-icon" />
            </div>
            <h3 class="card-title">
                {title}
            </h3>
        </div>
        <p class="card-description">
            {description}
        </p>
        <div class="card-tags">
            {
                tags
                    .slice(0, 3)
                    .map((tag) => (
                        <span class="tag-badge">
                            {tag}
                        </span>
                    ))
            }
        </div>
        <div class="card-footer">
            <Icon name="mdi:play-circle-outline" class="footer-icon" />
            <span>{t("mechanics.interactiveDemo")}</span>
        </div>
    </div>
    <div class="hover-overlay"></div>
</a>
